# Vežbe 7

- [Vežbe 7](#vežbe-7)
  - [Ugnježdeni upiti](#ugnježdeni-upiti)
    - [Nekorelisani ugnježdeni upiti](#nekorelisani-ugnježdeni-upiti)
    - [EXISTS](#exists)
    - [Korelisani ugnježdeni upiti](#korelisani-ugnježdeni-upiti)
 
## Ugnježdeni upiti

U SQL-u, **podupit** se može jednostavno definisati kao **upit unutar drugog upita**. Spoljni upit se naziva glavni upit, a unutrašnji upit se naziva podupit. Drugim rečima, možemo reći da je podupit upit koji je najčešće ugrađen u **WHERE** klauzulu drugog SQL upita. Evo nekoliko važnih pravila za podupite:
* Možete postaviti podupit u različite SQL klauzule (SELECT, FROM, WHERE).
* Podupiti se mogu koristiti sa operatorima izraza. To mogu biti operatori poređenja kao što su =, >, =, <= i LIKE operator.
* Podupit obično se izvršava prvo kada podupit nema nikakvu **korelaciju** sa glavnim upitom. Kada postoji korelacija, parser odlučuje na licu mesta koji upit izvršiti prema prioritetu i koristi izlaz podupita prema potrebi.
* Podupit mora biti zatvoren zagradama.
* Podupiti se nalaze na desnoj strani operatora poređenja.

| Snast | Imen        |
|-------|-------------|
| 20    | Stefanović  |

### Nezavisni ugnježdeni upiti

Kod nezavisnih ugnježdenih upita, izvršavanje upita počinje od najunutrašnjijeg upita prema spoljašnjim upitima. Izvršavanje unutrašnjeg upita je nezavisno od spoljašnjeg upita i **IZVRŠAVA SE SAMO JEDNOM**, ali rezultat unutrašnjeg upita se koristi pri izvršavanju spoljašnjeg upita. Različiti operatori kao što su IN, NOT IN, ANY, ALL itd. koriste se pri pisanju nezavisnih ugnježdenih upita.

```sql
SELECT *
FROM [Nastavnici]
WHERE [Snast] NOT IN
(
  SELECT [snast]
  FROM [Angazovanje]
)
```

Upit radi to što se na početku izvrši podupit i tako dobijemo listu svih angažovanih nastavnika (njihove identifikatore). Ovo ne moramo ponavljata svaki put kada ispitujemo zasebni red, već samo jednom. Vidimo da je unutrašnji upit nezavisan od spoljašnjeg upita, jer se njegov rezultat ne menja od zavisnosti reda nad kojim se izvršava.

### EXISTS

### Korelisani ugnježdeni upiti

```sql
SELECT *
FROM [Nastavnici] n
WHERE NOT EXISTS
(
	SELECT *
	FROM [Angazovanje] a
	WHERE a.[Snast] = n.[Snast]
)
```
